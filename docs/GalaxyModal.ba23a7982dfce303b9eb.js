(self.webpackChunkspace_travel=self.webpackChunkspace_travel||[]).push([[313],{28759:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(49280),i=n.n(a),l=n(92763),o=n.n(l);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}const s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imgDivs=t,this.display=t[0].parentElement,this.bulletNav=document.querySelector(".galaxy-modal__nav-bullets"),this.bullets=document.querySelectorAll(".galaxy-modal__bullet"),this.nextBtn=document.querySelector(".galaxy-modal__nav-arrow--right"),this.prevBtn=document.querySelector(".galaxy-modal__nav-arrow--left"),this.numNav=document.querySelector(".galaxy-modal__index"),this.position=document.querySelector(".galaxy-modal__index span:first-child"),this.total=document.querySelector(".galaxy-modal__index span:last-child"),this.loader=document.querySelector(".galaxy-loader"),this.startX,this.index=0,this.frozen=!0,this.events(),this.start()}var t,n;return t=e,(n=[{key:"events",value:function(){var e=this;this.display.addEventListener("mousedown",(function(t){t.preventDefault(),e.startX=t.clientX})),this.display.addEventListener("mouseup",(function(t){t.clientX>e.startX?e.next():t.clientX<e.startX&&e.prev()})),this.display.addEventListener("touchstart",(function(t){1===t.touches.length&&(e.startX=t.touches[0].screenX)}),{passive:!0}),this.display.addEventListener("touchend",(function(t){if(t.preventDefault(),0===t.touches.length){var n=t.changedTouches[0].screenX-e.startX;Math.abs(n)>35&&n>0?e.next():Math.abs(n)>35&&e.prev()}})),this.nextBtn.addEventListener("click",(function(t){e.next()})),this.prevBtn.addEventListener("click",(function(t){e.prev()})),this.bullets.forEach((function(t,n){t.addEventListener("click",(function(){e.index=n,e.showImg(),e.updateBullets(),e.updateIndexDisplay()}))}))}},{key:"next",value:function(){this.frozen||(this.index===this.imgDivs.length-1?this.index=0:this.index++,this.showImg(),this.updateBullets(),this.updateIndexDisplay())}},{key:"prev",value:function(){this.frozen||(0===this.index?this.index=this.imgDivs.length-1:this.index--,this.showImg(),this.updateBullets(),this.updateIndexDisplay())}},{key:"showImg",value:function(){this.hideImages(),this.imgDivs[this.index].style.opacity=1,this.imgDivs[this.index].style.visibility="visible"}},{key:"updateBullets",value:function(){this.bullets.forEach((function(e){e.classList.remove("galaxy-modal__bullet--active")})),this.bullets[this.index].classList.add("galaxy-modal__bullet--active"),this.bulletNav.style.bottom="-80px"}},{key:"updateIndexDisplay",value:function(){this.position.textContent=this.index+1,this.total.textContent=this.imgDivs.length}},{key:"hideImages",value:function(){this.imgDivs.forEach((function(e){e.style.opacity=0,e.style.visibility="hidden"}))}},{key:"hideNumNav",value:function(){this.numNav.style.opacity=0}},{key:"hideBulletNav",value:function(){this.bulletNav.style.bottom=0}},{key:"revealLoader",value:function(){this.loader.style.zIndex=1}},{key:"start",value:function(){this.index=0,this.imgDivs[this.index].style.opacity=1,this.imgDivs[this.index].style.visibility="visible",this.bullets[this.index].classList.add("galaxy-modal__bullet--active"),this.updateIndexDisplay(),this.updateBullets(),this.numNav.style.opacity=1,this.loader.style.zIndex=-1,this.frozen=!1}}])&&r(t.prototype,n),e}();function u(e,t,n,a,i,l,o){try{var r=e[l](o),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var l=e.apply(t,n);function o(e){u(l,a,i,o,r,"next",e)}function r(e){u(l,a,i,o,r,"throw",e)}o(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(){var t=this;d(this,e),this.modalHook=document.querySelector("#GalaxyModal"),this.siteHeader=document.querySelector(".site-header"),this.modalPrepared=this.fetchHTML().then((function(e){return t.injectHTML(e)})).then((function(){return t.init()})).catch((function(e){return console.log(e.message)})),this.imgsDownloaded=this.downloadImgs(),Promise.all([this.modalPrepared,this.imgsDownloaded]).then((function(e){return t.appendContent(e[1])}))}var t,n,a,l;return t=e,n=[{key:"fetchHTML",value:(l=c(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("assets/data/GalaxyModal.html");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not read the resource html");case 5:return e.next=7,t.text();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"injectHTML",value:function(e){this.modalHook.insertAdjacentHTML("afterbegin",e)}},{key:"init",value:function(){var e=this;this.modal=document.querySelector(".galaxy-modal"),this.close=document.querySelector(".galaxy-modal__close"),this.display=document.querySelector(".galaxy-modal__display"),setTimeout((function(){e.emit("htmlReady"),e.isReady=!0}),20),this.close.addEventListener("click",(function(){return e.closeModal()})),document.addEventListener("keyup",(function(t){"Escape"==t.code&&e.closeModal()}))}},{key:"downloadImgs",value:(a=c(regeneratorRuntime.mark((function e(){var t,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("\n    https://api.nasa.gov/planetary/apod?api_key=FUhuTd8LAn8IIRbXyVx7WGkGFTzkZ1qhXtfABID1&count=10\n    ");case 2:return(t=e.sent)instanceof Error&&console.log("Could not reach the endpoint: "),t.ok||console.log(t.statusText),e.next=7,t.json();case 7:return n=e.sent,a=this.createPictureItems(n),e.next=11,this.fetchImgs(a);case 11:return i=e.sent,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"createPictureItems",value:function(e){var t=e.filter((function(e){return"image"==e.media_type})).slice(0,5),n=[];return t.forEach((function(e){var t=new y(e.copyright,e.date,e.title,e.url);n.push(t)})),n}},{key:"fetchImgs",value:function(e){return new Promise((function(t,n){var a=[];e.forEach((function(e){var t=new Promise((function(t,n){e.imgTag.addEventListener("load",(function(){t(e)})),e.imgTag.addEventListener("error",(function(){n(new Error("Could not load the image"))})),e.imgTag.src=e.url}));a.push(t)})),Promise.all(a).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}},{key:"appendContent",value:function(e){var t=i()(e);this.display.insertAdjacentHTML("afterbegin",t),this.imgHooks=document.querySelectorAll(".galaxy-modal__img-container"),this.imgHooks.forEach((function(t,n){t.insertAdjacentElement("afterbegin",e[n].imgTag)})),document.querySelector(".galaxy-modal__nav-bullets").innerHTML=o()(e),this.slider=new s(this.imgHooks)}},{key:"replaceImages",value:function(e){this.imgHooks.forEach((function(t,n){t.querySelector("img").replaceWith(e[n].imgTag),t.querySelector(".galaxy-modal__title").textContent="Title: ".concat(e[n].title),t.querySelector(".galaxy-modal__date").textContent="Date: ".concat(e[n].date);var a=0;switch(e[n].copy&&(a+=1),t.querySelector(".galaxy-modal__author")&&(a+=2),a){case 1:var i=document.createElement("P");i.classList.add("galaxy-modal__author"),i.textContent="Author: ".concat(e[n].copy),t.querySelector(".galaxy-modal__tag").appendChild(i);break;case 2:t.querySelector(".galaxy-modal__author").remove();break;case 3:t.querySelector(".galaxy-modal__author").textContent="Author: ".concat(e[n].copy);break;default:console.log("Author field not applicable")}}))}},{key:"openModal",value:function(){var e=this;this.modal.classList.add("galaxy-modal--is-visible"),document.documentElement.classList.add("noScroll"),this.hasBeenOpened&&(this.slider.hideImages(),this.slider.hideNumNav(),this.slider.hideBulletNav(),this.slider.revealLoader(),this.slider.frozen=!0,this.downloadImgs().then((function(t){return e.replaceImages(t)})).then((function(){return e.slider.start()}))),this.hasBeenOpened=!0}},{key:"closeModal",value:function(){this.modal.classList.remove("galaxy-modal--is-visible"),this.siteHeader.classList.contains("site-header--is-expanded")||document.documentElement.classList.remove("noScroll")}}],n&&h(t.prototype,n),e}(),y=function e(t,n,a,i){d(this,e),this.copy=t,this.date=n,this.title=a,this.url=i,this.imgTag=document.createElement("IMG")};const p=m},49280:(e,t,n)=>{var a=n(40202);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lambda,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="galaxy-modal__img-container">\r\n    <div class="galaxy-modal__tag">\r\n      <p class="galaxy-modal__title">Title: '+(null!=(l=o(null!=t?r(t,"title"):t,t))?l:"")+'</p>\r\n      <p class="galaxy-modal__date">Date: '+(null!=(l=o(null!=t?r(t,"date"):t,t))?l:"")+"</p>\r\n"+(null!=(l=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"copy"):t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:6},end:{line:8,column:13}}}))?l:"")+"    </div>\r\n  </div>\r\n"},2:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <p class="galaxy-modal__author">Author: '+(null!=(l=e.lambda(null!=t?o(t,"copy"):t,t))?l:"")+"</p>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l;return null!=(l=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:11,column:9}}}))?l:""},useData:!0})},92763:(e,t,n)=>{var a=n(40202);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return'  <li class="galaxy-modal__bullet">\r\n    <span></span>\r\n  </li>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l;return null!=(l=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:5,column:9}}}))?l:""},useData:!0})}}]);